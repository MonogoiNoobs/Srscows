<!DOCTYPE html>
<html lang="ja">
<meta charset="utf-8">

<title>Srscows - Speech-recognition-subtitle-chan w/ OBS WebSocket</title>

<link rel="license" href="https://github.com/aws/mit-0" title="MIT-0">
<meta name="author" content="MonogoiNoobs">

<style>
  .unseen,
  #cancel:disabled,
  #cancel:enabled+#submit,
  #submit:disabled {
    display: none;
  }

  #isTranslation:checked+.unseen,
  #hasYukarinette:checked+.unseen,
  #hasBouyomiChan:checked+.unseen,
  .unseen label {
    display: block;
  }
</style>

<form id="main">
  <fieldset id="field">
    <legend>音声認識字幕ちゃん (OBS WebSocket 版)</legend>
    <p><label>ポート番号: <input type="number" value="4444" id="port" min="0" required></label></p>
    <p><label>パスワード: <input type="password" id="pass" placeholder="未設定の場合は無記入"></label></p>
    <p><label>字幕ソース: <input type="text" id="src" value="sub_ja" required></label></p>
    <p><label>字幕が消えるまでの秒数(ミリ秒、0 で永続): <input type="number" min="0" id="fadetime" value="5000"></label></p>
    <p><label>テキストの種類: <select id="type">
          <option value="GDIPlus" selected>GDI+</option>
          <option value="Freetype2">FreeType 2</option>
        </select></label></p>
    <p><label>認識中は &lt;&lt;&gt;&gt; で囲む: <input type="checkbox" id="isBracketed" checked></label></p>
    <p><label for="isTranslation">GAS による翻訳を表示する: </label><input type="checkbox" id="isTranslation"><span
        class="unseen">
        <label>翻訳字幕ソース: <input type="text" id="transrc" value="sub_en"></label>
        <label>字幕が消えるまでの秒数(ミリ秒、0 で永続): <input type="number" min="0" id="transfadetime" value="5000"></label>
        <label>GAS デプロイ ID: <input type="text" id="gas" size="96" value=""
            placeholder="作成したスクリプトのデプロイ ID を入力..."></label></span></p>
    <p><label for="hasYukarinette">ゆかりねっとに認識結果を送る: </label><input type="checkbox" id="hasYukarinette"><span
        class="unseen">
        <label>ポート番号: <input type="number" id="yukarinettePort" min="0" value="49513"></label></span></p>
    <p><label for="hasBouyomiChan">棒読みちゃんに認識結果を送る: </label><input type="checkbox" name="hasBouyomiChan"
        id="hasBouyomiChan"><span class="unseen">
        <label>ポート番号: <input type="number" id="bouyomiChanPort" min="0" value="50080"></label></span></p>
    <p><button type="cancel" id="cancel" disabled>切断</button><button type="submit" id="submit">接続</button></p>
  </fieldset>
</form>

<p><output id="stdout"></output></p>
<p><output id="trans"></output></p>
<p><output id="ykout"></output></p>
<p><output id="bcout"></output></p>

<script>
  const isChrome = globalThis.navigator.userAgent.includes("Chrome/")
    && !(
      globalThis.navigator.userAgent.includes("Edg/")
      || globalThis.navigator.userAgent.includes("Mobile")
      || globalThis.navigator.userAgent.includes("YaBrowser/")
      || globalThis.navigator.userAgent.includes("Vivaldi/")
      || globalThis.navigator.userAgent.includes("OPR/")
      || globalThis.navigator.userAgent.includes("Brave")
    );

  if (!isChrome) document.body.innerHTML = "<p>Google Chrome 以外のブラウザでは利用できません。";
</script>

<script src="./index.js"></script>
